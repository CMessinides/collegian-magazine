{{ define "head-title" }}{{ .Site.Data.branding.site_name | default .Site.Title }}{{ end }}

{{ define "head-description" }}{{ .Site.Data.branding.description | printf "%.150s" }}{{ end }}

{{ define "head-social" }}

{{ end }}

{{ define "hero" }}
  {{ $featured := index (where (where .Site.Pages "Section" "article") "Params.featured" true) 0 }}

  {{ if $featured }}

    <div class="hero">
      <div class="hero__banner">
        <div class="hero__fade"></div>
        <div class="hero__image" {{ with $featured.Params.cover_image }}style="background-image:url({{ . | absURL | safeCSS }});"{{ end }}>
        </div>
      </div>
      <div class="hero__inner lg-grid">
        <h1 class="hidden">Featured</h1>
        {{ $featured.Render "hero-insert" }}
      </div>

    </div>

  {{ end }}

{{ end }}

{{ define "content" }}
    <section class="">
      <h1 class="h4">In the Latest Issue</h1>
      <ul class="list">
        {{ range first 5 (where (where .Site.Pages "Section" "article") "Params.featured" "ne" "true") }}
        <li>{{ .Render "card-beta" }}</li>
        {{ end }}
      </ul>
      <a href="{{ "/article/" | absURL }}">All articles</a>
    </section>

    {{ $first_announce := index (where .Site.Pages "Section" "announcement") 0 }}
    {{ if $first_announce }}
    <section class="section--bold">
      <h1 class="h4">Announcement</h1>
      {{ $first_announce.Render "card-beta" }}
      <a href="{{ "/announcement/" | absURL }}">More announcements</a>
    </section>
    {{ end }}

    <section class="">
      <h1 class="h4">Categories</h1>
      <ul class="list">
        {{ range $name, $category := .Site.Taxonomies.categories }}
        <li class="wid-6">
          <h2 class="h2">{{ $name }}</h2>
          <ul class="list">
            {{ range first 3 $category.Pages}}
            <li>{{ .Render "card-gamma" }}</li>
            {{ end }}
          </ul>
          <a href="{{ $name | urlize | printf "/categories/%s/" | absURL }}">More in {{ $name }}</a>
        </li>
        {{ end }}
      </ul>
    </section>
{{ end }}
